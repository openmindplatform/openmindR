ungroup() %>%
mutate(perc = specify_decimal(n/total*100, 1)) %>%
mutate(lab = glue::glue("{n}\n({perc}%)")) %>%
set_names(c("LifeHack", "LifeHacksUseful", "n", "total", "perc",   "lab"))
}
lh_data %>%
filter(LifeHack1 != "No Life Hack") %>%
lh_useful_num(LifeHack1, LifeHacksUseful1)
lh_useful_num <- function(lh_data, lifehack, lifehackuseful) {
lh_data %>%
select(!!lifehack, !!lifehackuseful) %>%
drop_na() %>%
# filter({{lifehack}} != "No Life Hack") %>%
dplyr::count(!!lifehack, !!lifehackuseful) %>%
group_by(!!lifehack) %>%
mutate(total = sum(n)) %>%
ungroup() %>%
mutate(perc = specify_decimal(n/total*100, 1)) %>%
mutate(lab = glue::glue("{n}\n({perc}%)")) %>%
set_names(c("LifeHack", "LifeHacksUseful", "n", "total", "perc",   "lab"))
}
lh_data %>%
filter(LifeHack1 != "No Life Hack") %>%
lh_useful_num(LifeHack1, LifeHacksUseful1)
debugonce(lh_useful_num)
lh_data %>%
filter(LifeHack1 != "No Life Hack") %>%
lh_useful_num(LifeHack1, LifeHacksUseful1)
lh_data %>%
select(!!lifehack, !!lifehackuseful)
lh_useful_num <- function(lh_data, lifehack, lifehackuseful) {
lh_data %>%
select({{ lifehack }}, {{ lifehackuseful }}) %>%
drop_na() %>%
# filter({{lifehack}} != "No Life Hack") %>%
dplyr::count(!!lifehack, !!lifehackuseful) %>%
group_by(!!lifehack) %>%
mutate(total = sum(n)) %>%
ungroup() %>%
mutate(perc = specify_decimal(n/total*100, 1)) %>%
mutate(lab = glue::glue("{n}\n({perc}%)")) %>%
set_names(c("LifeHack", "LifeHacksUseful", "n", "total", "perc",   "lab"))
}
lh_data %>%
filter(LifeHack1 != "No Life Hack") %>%
lh_useful_num(LifeHack1, LifeHacksUseful1)
debugonce(lh_useful_num)
lh_data %>%
filter(LifeHack1 != "No Life Hack") %>%
lh_useful_num(LifeHack1, LifeHacksUseful1)
lh_data %>%
select({{ lifehack }}, {{ lifehackuseful }})
lh_data %>%
select({{ lifehack }}, {{ lifehackuseful }}) %>%
drop_na() %>%
# filter({{lifehack}} != "No Life Hack") %>%
dplyr::count(!!lifehack, !!lifehackuseful)
lh_data %>%
select({{ lifehack }}, {{ lifehackuseful }}) %>%
drop_na()
lh_data %>%
select({{ lifehack }}, {{ lifehackuseful }}) %>%
drop_na() %>% View()
lh_useful_num <- function(lh_data, lifehack, lifehackuseful) {
lh_data %>%
select({{ lifehack }}, {{ lifehackuseful }}) %>%
drop_na() %>%
# filter({{lifehack}} != "No Life Hack") %>%
dplyr::count({{ lifehack }}, {{ lifehackuseful }}) %>%
group_by(!!lifehack) %>%
mutate(total = sum(n)) %>%
ungroup() %>%
mutate(perc = specify_decimal(n/total*100, 1)) %>%
mutate(lab = glue::glue("{n}\n({perc}%)")) %>%
set_names(c("LifeHack", "LifeHacksUseful", "n", "total", "perc",   "lab"))
}
lh_data %>%
filter(LifeHack1 != "No Life Hack") %>%
lh_useful_num(LifeHack1, LifeHacksUseful1)
debugonce(lh_useful_num)
lh_data %>%
filter(LifeHack1 != "No Life Hack") %>%
lh_useful_num(LifeHack1, LifeHacksUseful1)
lh_data %>%
select({{ lifehack }}, {{ lifehackuseful }}) %>%
drop_na() %>%
# filter({{lifehack}} != "No Life Hack") %>%
dplyr::count({{ lifehack }}, {{ lifehackuseful }})
lh_data %>%
select({{ lifehack }}, {{ lifehackuseful }}) %>%
drop_na() %>%
# filter({{lifehack}} != "No Life Hack") %>%
dplyr::count({{ lifehack }}, {{ lifehackuseful }}) %>% View
lh_useful_num <- function(lh_data, lifehack, lifehackuseful) {
lh_data %>%
select({{ lifehack }}, {{ lifehackuseful }}) %>%
drop_na() %>%
# filter({{lifehack}} != "No Life Hack") %>%
dplyr::count({{ lifehack }}, {{ lifehackuseful }}) %>%
group_by({{ lifehack }}) %>%
mutate(total = sum(n)) %>%
ungroup() %>%
mutate(perc = specify_decimal(n/total*100, 1)) %>%
mutate(lab = glue::glue("{n}\n({perc}%)")) %>%
set_names(c("LifeHack", "LifeHacksUseful", "n", "total", "perc",   "lab"))
}
lh_data %>%
filter(LifeHack1 != "No Life Hack") %>%
lh_useful_num(LifeHack1, LifeHacksUseful1)
lh_useful_num <- function(lh_data, lifehack, lifehackuseful) {
lh_data %>%
select({{ lifehack }}, {{ lifehackuseful }}) %>%
drop_na() %>%
filter({{ lifehack }} != "No Life Hack") %>%
dplyr::count({{ lifehack }}, {{ lifehackuseful }}) %>%
group_by({{ lifehack }}) %>%
mutate(total = sum(n)) %>%
ungroup() %>%
mutate(perc = specify_decimal(n/total*100, 1)) %>%
mutate(lab = glue::glue("{n}\n({perc}%)")) %>%
set_names(c("LifeHack", "LifeHacksUseful", "n", "total", "perc",   "lab"))
}
lh_data %>%
filter(LifeHack1 != "No Life Hack") %>%
lh_useful_num(LifeHack1, LifeHacksUseful1)
lh_useful_num <- function(lh_data, lifehack, lifehackuseful, mod) {
lh_data %>%
select({{ lifehack }}, {{ lifehackuseful }}) %>%
drop_na() %>%
filter({{ lifehack }} != "No Life Hack") %>%
dplyr::count({{ lifehack }}, {{ lifehackuseful }}) %>%
group_by({{ lifehack }}) %>%
mutate(total = sum(n)) %>%
ungroup() %>%
mutate(perc = specify_decimal(n/total*100, 1)) %>%
mutate(lab = glue::glue("{n}\n({perc}%)")) %>%
set_names(c("LifeHack", "LifeHacksUseful", "n", "total", "perc",   "lab")) %>%
mutate(Module = mod)
}
bind_rows(
lh_data %>%
lh_useful_num(LifeHack1, LifeHacksUseful1, 1),
lh_data %>%
lh_useful_num(LifeHack2, LifeHacksUseful2, 2),
lh_data %>%
lh_useful_num(LifeHack3, LifeHacksUseful3, 3),
lh_data %>%
lh_useful_num(LifeHack4, LifeHacksUseful4, 4)
)
useful_dat <- bind_rows(
lh_data %>%
lh_useful_num(LifeHack1, LifeHacksUseful1, 1),
lh_data %>%
lh_useful_num(LifeHack2, LifeHacksUseful2, 2),
lh_data %>%
lh_useful_num(LifeHack3, LifeHacksUseful3, 3),
lh_data %>%
lh_useful_num(LifeHack4, LifeHacksUseful4, 4)
)
useful_dat
useful_dat %>%
ggplot(aes(LifeHacksUseful, n))  +
geom_col() +
facet_wrap(~LifeHack) +
geom_text(aes(label = lab))
useful_dat %>%
ggplot(aes(LifeHacksUseful, n, fill = Module))  +
geom_col() +
facet_wrap(~LifeHack, nrow = 3) +
geom_text(aes(label = lab))
useful_dat <- bind_rows(
lh_data %>%
lh_useful_num(LifeHack1, LifeHacksUseful1, "1"),
lh_data %>%
lh_useful_num(LifeHack2, LifeHacksUseful2, "2"),
lh_data %>%
lh_useful_num(LifeHack3, LifeHacksUseful3, "3"),
lh_data %>%
lh_useful_num(LifeHack4, LifeHacksUseful4, "4")
)
useful_dat %>%
ggplot(aes(LifeHacksUseful, n, fill = Module))  +
geom_col() +
facet_wrap(~LifeHack, nrow = 3) +
geom_text(aes(label = lab))
useful_dat %>%
ggplot(aes(LifeHacksUseful, n, fill = Module))  +
geom_col() +
facet_wrap(~LifeHack, ncol = 3) +
geom_text(aes(label = lab))
useful_dat %>%
mutate(LifeHack = fct_reorder(LifeHack, Module)) %>%
ggplot(aes(LifeHacksUseful, n, fill = Module))  +
geom_col() +
facet_wrap(~LifeHack, ncol = 3) +
geom_text(aes(label = lab))
useful_dat %>%
mutate(LifeHack = fct_reorder(LifeHack, Module)) %>%
ggplot(aes(LifeHacksUseful, n, fill = Module))  +
geom_col() +
facet_wrap(~LifeHack, ncol = 3) +
geom_text(aes(label = lab)) +
scale_fill_om()
rath::ggpreview(width = 10, height = 5)
useful_dat %>%
mutate(LifeHack = fct_reorder(LifeHack, Module)) %>%
ggplot(aes(LifeHacksUseful, n, fill = Module))  +
geom_col() +
facet_wrap(~LifeHack, ncol = 3) +
geom_text(aes(label = lab)) +
scale_fill_om() +
theme(legend.position = "bottom")
rath::ggpreview(width = 15, height = 8)
useful_dat %>%
mutate(LifeHack = fct_reorder(LifeHack, Module)) %>%
ggplot(aes(LifeHacksUseful, n, fill = Module))  +
geom_col() +
facet_wrap(~LifeHack, ncol = 3) +
geom_text(aes(label = lab), nudge_y = 20) +
scale_fill_om() +
theme(legend.position = "bottom") +
ylim(0, 1000)
rath::ggpreview(width = 15, height = 8)
useful_dat %>%
mutate(LifeHack = fct_reorder(LifeHack, Module)) %>%
ggplot(aes(LifeHacksUseful, n, fill = Module))  +
geom_col() +
facet_wrap(~LifeHack, ncol = 3) +
geom_text(aes(label = lab), nudge_y = 100) +
scale_fill_om() +
theme(legend.position = "bottom") +
ylim(0, 1000)
rath::ggpreview(width = 15, height = 8)
useful_dat %>%
mutate(LifeHack = fct_reorder(LifeHack, Module)) %>%
ggplot(aes(LifeHacksUseful, n, fill = Module))  +
geom_col() +
facet_wrap(~LifeHack, ncol = 3) +
geom_text(aes(label = lab), nudge_y = 130) +
scale_fill_om() +
theme(legend.position = "bottom") +
ylim(0, 1000)
rath::ggpreview(width = 12, height = 10)
useful_dat %>%
mutate(LifeHack = fct_reorder(LifeHack, Module)) %>%
ggplot(aes(LifeHacksUseful, n, fill = Module))  +
geom_col() +
facet_wrap(~LifeHack, ncol = 3) +
geom_text(aes(label = lab), nudge_y = 130) +
scale_fill_om() +
theme(legend.position = "top") +
ylim(0, 1000)
rath::ggpreview(width = 8, height = 6)
rath::ggpreview(width = 10, height = 6)
useful_dat %>%
mutate(LifeHack = fct_reorder(LifeHack, Module)) %>%
ggplot(aes(LifeHacksUseful, n, fill = Module))  +
geom_col() +
facet_wrap(~LifeHack, ncol = 3) +
geom_text(aes(label = lab), nudge_y = 130) +
scale_fill_om() +
theme(legend.position = "top") +
ylim(0, 1000) +
theme_minimal()
rath::ggpreview(width = 10, height = 6)
useful_dat %>%
mutate(LifeHack = fct_reorder(LifeHack, Module)) %>%
ggplot(aes(LifeHacksUseful, n, fill = Module))  +
geom_col() +
facet_wrap(~LifeHack, ncol = 3) +
geom_text(aes(label = lab), nudge_y = 130) +
scale_fill_om() +
ylim(0, 1000) +
theme_minimal()  +
theme(legend.position = "top")
rath::ggpreview(width = 10, height = 6)
rath::ggpreview(width = 10, height = 8)
useful_dat %>%
mutate(LifeHack = fct_reorder(LifeHack, Module)) %>%
ggplot(aes(LifeHacksUseful, n, fill = Module))  +
geom_col() +
facet_wrap(~LifeHack, ncol = 3) +
geom_text(aes(label = lab), nudge_y = 130, size = 6) +
scale_fill_om() +
ylim(0, 1000) +
theme_minimal()  +
theme(legend.position = "top",
strip.text = element_text(size = 20))
rath::ggpreview(width = 10, height = 8)
useful_dat %>%
mutate(LifeHack = fct_reorder(LifeHack, Module)) %>%
ggplot(aes(LifeHacksUseful, n, fill = Module))  +
geom_col() +
facet_wrap(~LifeHack, ncol = 3) +
geom_text(aes(label = lab), nudge_y = 130, size = 3) +
scale_fill_om() +
ylim(0, 1000) +
theme_minimal()  +
theme(legend.position = "top",
strip.text = element_text(size = 15))
rath::ggpreview(width = 10, height = 8)
useful_dat %>%
mutate(LifeHack = fct_reorder(LifeHack, Module)) %>%
ggplot(aes(LifeHacksUseful, n, fill = Module))  +
geom_col() +
facet_wrap(~LifeHack, ncol = 3) +
geom_text(aes(label = lab), nudge_y = 130, size = 3) +
scale_fill_om() +
ylim(0, 1000) +
theme_minimal()  +
theme(legend.position = "top",
strip.text = element_text(size = 10))
rath::ggpreview(width = 10, height = 8)
lh_data <- parsed_lh2 %>%
mutate_at(vars(LifeHacksUseful1:LifeHacksUseful5), parse_number)
useful_dat <- bind_rows(
lh_data %>%
lh_useful_num(LifeHack1, LifeHacksUseful1, "1"),
lh_data %>%
lh_useful_num(LifeHack2, LifeHacksUseful2, "2"),
lh_data %>%
lh_useful_num(LifeHack3, LifeHacksUseful3, "3"),
lh_data %>%
lh_useful_num(LifeHack4, LifeHacksUseful4, "4")
)
useful_dat %>%
mutate(LifeHack = fct_reorder(LifeHack, Module)) %>%
ggplot(aes(LifeHacksUseful, n, fill = Module))  +
geom_col() +
facet_wrap(~LifeHack, ncol = 3) +
geom_text(aes(label = lab), nudge_y = 130, size = 3) +
scale_fill_om() +
ylim(0, 1000) +
theme_minimal()  +
theme(legend.position = "top",
strip.text = element_text(size = 10))
rath::ggpreview(width = 10, height = 8)
tidytemplate::open_template("lifehack_report")
lh_reason_data <- dplyr::bind_rows(
lh_data %>%
dplyr::select(-LifeHacksReason) %>%
lh_reason(LifeHack1, LifeHacksComplete1, LifeHacksReason1, step = 1),
lh_data %>%
dplyr::select(-LifeHacksReason) %>%
lh_reason(LifeHack2, LifeHacksComplete2, LifeHacksReason2, step = 2),
lh_data %>%
dplyr::select(-LifeHacksReason) %>%
lh_reason(LifeHack3, LifeHacksComplete3, LifeHacksReason3, step = 3),
lh_data %>%
dplyr::select(-LifeHacksReason) %>%
lh_reason(LifeHack4, LifeHacksComplete4, LifeHacksReason4, step = 4)
)
lh_reason_data
parsed_lh1 %>%
mutate_at(vars(LifeHacksUseful1:LifeHacksUseful5), parse_number)
parsed_lh1 %>%
mutate_at(vars(LifeHacksUseful1:LifeHacksUseful5), parse_number) %>%
summarize_at(vars(LifeHacksUseful1:LifeHacksUseful5))
parsed_lh1 %>%
mutate_at(vars(LifeHacksUseful1:LifeHacksUseful5), parse_number) %>%
summarize_at(vars(LifeHacksUseful1:LifeHacksUseful5), ~mean(.x, na.rm = T))
parsed_lh1 %>%
mutate_at(vars(LifeHacksUseful1:LifeHacksUseful5), parse_number) %>%
mutate_at(vars(LifeHacksUseful1:LifeHacksUseful5), ~mean(.x, na.rm = T))
parsed_lh1 %>%
mutate_at(vars(LifeHacksUseful1:LifeHacksUseful5), parse_number) %>%
mutate_at(vars(LifeHacksUseful1:LifeHacksUseful5), ~mean(.x, na.rm = T)) %>%
select(LifeHack1:LifeHack5, LifeHacksUseful1:LifeHacksUseful5)
parsed_lh1 %>%
mutate_at(vars(LifeHacksUseful1:LifeHacksUseful5), parse_number) %>%
mutate_at(vars(LifeHacksUseful1:LifeHacksUseful5), ~mean(.x, na.rm = T)) %>%
select(LifeHack1:LifeHack5, LifeHacksUseful1:LifeHacksUseful5) %>%
distinct(LifeHack1)
parsed_lh1 %>%
mutate_at(vars(LifeHacksUseful1:LifeHacksUseful5), parse_number) %>%
mutate_at(vars(LifeHacksUseful1:LifeHacksUseful5), ~mean(.x, na.rm = T)) %>%
select(LifeHack1:LifeHack5, LifeHacksUseful1:LifeHacksUseful5) %>%
distinct(LifeHack1, .keep_all = T)
lh_reason_data
parsed_lh1 %>%
mutate_at(vars(LifeHacksUseful1:LifeHacksUseful5), parse_number) %>%
mutate_at(vars(LifeHacksUseful1:LifeHacksUseful5), ~mean(.x, na.rm = T)) %>%
select(LifeHack1:LifeHack5, LifeHacksUseful1:LifeHacksUseful5) %>%
distinct(LifeHack1, .keep_all = T) %>%
select(LifeHack1, LifeHacksUseful1)
lh_data %>%
group_by(LifeHack1) %>%
summarize(LifeHacksUseful1 = mean(LifeHacksUseful1, na.rm = T))
lh_useful_num <- function(lh_data, lifehack, lifehackuseful) {
lh_data %>%
group_by({{ lifehack }}) %>%
summarize(LifeHacksUseful = mean({{ lifehackuseful }}, na.rm = T)) %>%
set_names(c("LifeHack", "LifeHacksUseful"))
}
lh_useful_num <- function(lh_data, lifehack, lifehackuseful) {
lh_data %>%
group_by({{ lifehack }}) %>%
summarize(LifeHacksUseful = mean({{ lifehackuseful }}, na.rm = T)) %>%
set_names(c("LifeHack", "LifeHacksUseful")) %>%
filter(LifeHack != "No Life Hack") %>%
drop_na(LifeHack)
}
lh_useful_num <- function(lh_data, lifehack, lifehackuseful, mod) {
lh_data %>%
group_by({{ lifehack }}) %>%
summarize(LifeHacksUseful = mean({{ lifehackuseful }}, na.rm = T)) %>%
set_names(c("LifeHack", "LifeHacksUseful")) %>%
filter(LifeHack != "No Life Hack") %>%
drop_na(LifeHack) %>%
mutate(Module = mod)
}
useful_plot_dat <- bind_rows(
lh_data %>%
lh_useful_num(LifeHack1, LifeHacksUseful1, "1"),
lh_data %>%
lh_useful_num(LifeHack2, LifeHacksUseful2, "2"),
lh_data %>%
lh_useful_num(LifeHack3, LifeHacksUseful3, "3"),
lh_data %>%
lh_useful_num(LifeHack4, LifeHacksUseful4, "4")
)
useful_dat <- bind_rows(
lh_data %>%
lh_useful_num(LifeHack1, LifeHacksUseful1, "1"),
lh_data %>%
lh_useful_num(LifeHack2, LifeHacksUseful2, "2"),
lh_data %>%
lh_useful_num(LifeHack3, LifeHacksUseful3, "3"),
lh_data %>%
lh_useful_num(LifeHack4, LifeHacksUseful4, "4")
)
useful_dat
devtools::load_all()
lh_data %>%
om_lifehacks_summary2()
parsed_lh1 %>%
om_lifehacks_summary2()
pacman::p_load(tidyverse, tidytemplate, openmindR)
devtools::load_all()
key <- read_lines("../../Keys/airtabler.txt")
## download participant progress data
pp_dat <- om_download_at(key, tables = "ParticipantProgress")
## download participant progress 2 data
pp_dat2 <- om_download_at(key, tables = "ParticipantProgress2")
## this parses all Lifehack data so far
# parsed_lh <-  om_parse_lifehacks(pp_dat)
## if you just want the newest life hack data you can filter by OpenMind version
parsed_lh1 <-  pp_dat %>%
## making sure OpenMindVersion is numeric
mutate(OpenMindVersion = as.numeric(OpenMindVersion)) %>%
## Only include OM Version 3 and above
filter(OpenMindVersion >= 3) %>%
## parse Life hacks
om_parse_lifehacks(OpenMindVersion = "Before 4.0")
summarize_at(vars(LifeHacksUseful1:LifeHacksUseful4), ~mean(.x, na.rm = T))
parsed_lh1
parsed_lh1 %>%
dplyr::count(LifeHacksChosen)
parsed_lh1 %>%
dplyr::count(LifeHacksChosen, sort = T)
parsed_lh1 %>%
om_lifehacks_summary2()
devtools::load_all()
parsed_lh1 %>%
om_lifehacks_summary2()
devtools::load_all()
parsed_lh1 %>%
om_lifehacks_summary2()
devtools::load_all()
parsed_lh1 %>%
om_lifehacks_summary2()
devtools::load_all()
parsed_lh1 %>%
om_lifehacks_summary2()
devtools::load_all()
parsed_lh1 %>%
om_lifehacks_summary2()
parsed_lh2 <-  pp_dat2 %>%
## making sure OpenMindVersion is numeric
mutate(OpenMindVersion = as.numeric(OpenMindVersion)) %>%
## parse Life hacks
om_parse_lifehacks(OpenMindVersion = "4.0+")
save_it(parsed_lh1)
View(pp_dat2)
save_it(parsed_lh2)
summary_lh1 <- parsed_lh1 %>%
om_lifehacks_summary2()
summary_lh1 %>%
DT::datatable()
summary_lh2 <- parsed_lh2 %>%
om_lifehacks_summary2()
summary_lh2 %>%
DT::datatable()
summary_lh1 %>%
DT::datatable(escape = F)
lh_useful_plot <- function(lh_data, lifehack, lifehackuseful, mod) {
lh_data %>%
select({{ lifehack }}, {{ lifehackuseful }}) %>%
drop_na() %>%
filter({{ lifehack }} != "No Life Hack") %>%
dplyr::count({{ lifehack }}, {{ lifehackuseful }}) %>%
group_by({{ lifehack }}) %>%
mutate(total = sum(n)) %>%
ungroup() %>%
mutate(perc = specify_decimal(n/total*100, 1)) %>%
mutate(lab = glue::glue("{n}\n({perc}%)")) %>%
set_names(c("LifeHack", "LifeHacksUseful", "n", "total", "perc",   "lab")) %>%
mutate(Module = mod)
}
devtools::install()
devtools::load_all()
devtools::install()
